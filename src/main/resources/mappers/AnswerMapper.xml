<!-- src/main/resources/mappers/AnswerMapper.xml -->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="practical.llm.answer.mapper.AnswerMapper">

    <!--
      tb_answer 컬럼 (필요부분만)
        - answer_id(BIGINT AI PK)
        - question_id(BIGINT)  ✅ 프론트에서 옴
        - answer_text(JSON)    ✅ {"text": "..."}로 저장
        - created_at(TIMESTAMP default CURRENT_TIMESTAMP)
    -->

    <insert id="insertAnswer"
            parameterType="practical.llm.answer.domain.Answer"
            useGeneratedKeys="true"
            keyProperty="a.answerId">
        INSERT INTO tb_answer
            (question_id, answer_text)
        VALUES
            (
                #{a.questionId},
                JSON_OBJECT('text', #{a.answerText})
            )
    </insert>

</mapper>